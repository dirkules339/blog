---
title:  "How much are you worth?"
subtitle: "At least a fortune!"
author: "Dirk Lindner"
avatar: "img/authors/Bild_Dirk_Lindner.jpg"
image: "img/ball.jpg"
date:   2023-03-09
---

### Market value of soccer players
In this post I'm analysing the market value of soccer players using a dataset from Kaggle. The dataset is scraped from transfermarkt.com.
At first I take a look at the data in generell to get an idea what data is available and on what the market value of soccer players might depend on.
In the second step I use this results in a basic linear regression model to predict the market value. So let's take a look at the results. After these changes we now see the top five leagues by market value of players are Great Britain, Spain, Italy, Germany and France. Netherlands are now ranked 9th place and are no longe part of the top five. That shows us, that the cleaning of the data is a crucial part of analysing data to get the right results.

### Github Repo:
You can find the full code here: https://github.com/dirkules339/Udacity_Data_Science_Nanodegree.git

### 1. Take a look at the data
After I took a first Look on the data with a the help of a boxplot, I saw that there are some changes needed befor the data is interpretable. So I changed the format of the market value into million â‚¬ to make it more readable. I only included data where the market value is not null and the players last season where in 2022 and they have an not axpired contract right now. I did that to look only at players who are still playing in an european pro league.

#### Market value compared by league (first try)
![A test image](img/1.png)

#### Market value compared by league (second try)
![A test image](img/2.png)

#### Top 10 Clubs by players market value 
![A test image](img/3.png)

#### Top 10 Players by market value
![A test image](img/4.png)

#### Market value by sub position
![A test image](img/5.png)


### 2. Simple linear regression model to predict market value of players

After getting a better understandig of the data I generated dummy variables as preparation for a first linear regression model to predict the market value of soccer players. Below you can see the example of sub postion dummy variables. For the regression model I generated dummy variables of postion, sub postion, foot and the current competition id. Additionally I used current club id and the players heights as variables for the model.
 
#### Generate dummy variables of sub positions (basic information)
![A test image](img/6.png)

With a training R2 of 0.25 the first model wasn't quiet good. You can see how predicted and actuel response differ in the plot below. Interessting fact: The testing R2 of scikit learn linear regression model becomes negative if it is lower than 0.5! 

#### Compare prediciton with actual response
![A test image](img/7.png)

To improve the model I added additional variables like goals, assists, red cards, yellow cards and minutes played to our dataset. Even if that improved the training R2 to 0.55 the testing R2 is still negative. That means the model has still room for improvement, but by adding some more specififc player stats to the model I easily doubled the fit. 

#### Generate dummy variables (personal player stats)
![A test image](img/8.png)

#### Compare prediciton with actual response
![A test image](img/9.png)
